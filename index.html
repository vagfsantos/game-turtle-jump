<html>
	<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<meta charset="utf-8"/>
		<script src="js/p5.min.js"></script>
		<script src="js/fundo.js"></script>
		<script src="js/sprite.js"></script>
		<script src="js/obstaculo.js"></script>
		<script src="js/eventos.js"></script>
		<script src="js/tartarruga.js"></script>
		<style>
			body{
				margin:0;
				border:0;
				padding:0;
				overflow: hidden;
				background:#000;
			}
			canvas{
				position: absolute;
				left: 0; right: 0;
				top:0; bottom: 0;
				margin: auto;
			}

		</style>
	</head>
	<body>
		<script>
		// variaveis globais
		var fundo_fixo,
			ruaAltura,
			ruaY;

		var obstaculo;

		var img_tartarruga,
			sprite_tartarruga,
			personagem_tartarruga;

		var evento;


		// pre carregando arquivos
		function preload(){
			img_tartarruga = loadImage("img/tartarruga.png");
			sprite_tartarruga = new Sprite(img_tartarruga, 4, 4);
			personagem_tartarruga = new Tartarruga(sprite_tartarruga);
			evento = new Evento();

			fundo_fixo = new Fundo();
		}

		function novoObstaculo(){
			var obstaculo = new Obstaculo();
			obstaculo.y = ruaY - 20;
			obstaculo.x = width;
			return obstaculo;
		}

		// configuracoes iniciais
		function setup(){
			createCanvas(600, 350);
			frameRate(30);
			ruaAltura = height * 40 / 100;
			ruaY = height - ruaAltura;

			// altura
			personagem_tartarruga.posicaoChao = ruaY - 55;
			personagem_tartarruga.y = ruaY - 55;
			personagem_tartarruga.tamanhoDoSalto = ruaY - 200;

			obstaculo = new Obstaculo();
			obstaculo.y = ruaY - 20;
			obstaculo.x = width;
		}

		function draw(){
			fundo_fixo.desenhar();

			// animacao - atualizando e desenhando na tela
			sprite_tartarruga.proximoFrame();
			personagem_tartarruga.atualizar();
			personagem_tartarruga.desenhar();
			
			obstaculo.atualizar();
			obstaculo.desenhar();
		}


		// toque na tela, Direita -> PULA, Esquerda -> ABAIXA
		function keyPressed(){
			if(keyCode === UP_ARROW || keyCode === 87){
				evento.pular = true;
			}

			if(keyCode === DOWN_ARROW || keyCode === 83){
				evento.abaixar = true;
			}
		}

		</script>
	</body>
</html>