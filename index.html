<html>
	<head>
	<meta name="viewport" content="width=device-width"/>
	<meta charset="utf-8"/>
		<script src="js/p5.min.js"></script>
		<script src="js/elementos.js"></script>
		<script src="js/fundo.js"></script>
		<script src="js/sprite.js"></script>
		<script src="js/obstaculo.js"></script>
		<script src="js/eventos.js"></script>
		<script src="js/tartarruga.js"></script>
		<style>
			body{
				margin:0;
				border:0;
				padding:0;
				overflow: hidden;
				background:#000;
			}
			canvas{
				position: absolute;
				left: 0; right: 0;
				top:0; bottom: 0;
				margin: auto;
			}

		</style>
	</head>
	<body>
		<script>
		// variaveis globais
		var fundo_fixo,
			ruaAltura,
			ruaY;

		var img_tartarruga,
			sprite_tartarruga,
			personagem_tartarruga;

		var evento;

		var img_fogo,
			sprite_fogo;

		var elementos;

		function criaObstaculo(){
			sprite_fogo = new Sprite(img_fogo, 1, 2);

			sprite_fogo.largura = 15;
			sprite_fogo.altura = 20;
			sprite_fogo.linha = 0;
			sprite_fogo.intervalo = 40;

			var obstaculo = new Obstaculo(sprite_fogo);
			obstaculo.x = width;
			obstaculo.y = ruaY - 20;
			elemento.novoElemento(obstaculo);
		}


		// pre carregando arquivos
		function preload(){
			img_tartarruga = loadImage("img/tartarruga.png");
			sprite_tartarruga = new Sprite(img_tartarruga, 4, 4);
			personagem_tartarruga = new Tartarruga(sprite_tartarruga);

			img_fogo = loadImage("img/fogo.png");

			evento = new Evento();
			fundo_fixo = new Fundo();

			elemento = new ElementoNaTela();
			elemento.novoElemento(fundo_fixo);
			elemento.novoElemento(personagem_tartarruga);
		}
		var i = true;

		// configuracoes iniciais
		function setup(){
			createCanvas(600, 350);
			frameRate(30);
			ruaAltura = height * 40 / 100;
			ruaY = height - ruaAltura;

			// altura
			personagem_tartarruga.posicaoChao = ruaY - 55;
			personagem_tartarruga.y = ruaY - 55;
			personagem_tartarruga.tamanhoDoSalto = ruaY - 200;
		}


		function draw(){
			elemento.atualizar();
			elemento.desenhar();

			if(i){criaObstaculo(); i = false}
		}


		// toque na tela, Direita -> PULA, Esquerda -> ABAIXA
		function keyPressed(){
			if(keyCode === UP_ARROW || keyCode === 87){
				evento.pular = true;
			}

			if(keyCode === DOWN_ARROW || keyCode === 83){
				evento.abaixar = true;
			}
		}

		</script>
	</body>
</html>